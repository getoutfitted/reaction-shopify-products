<template name="dashboardBundleDetail">
  {{!-- navbar --}}
  <div class='container'>
    <h1>{{bundle.title}}</h1>
  </div>
  <div>
    {{#if Template.subscriptionsReady}}
      {{#each colors}}
        {{> dashboardBundleSettings}}
      {{/each}}
    {{else}}
      Loading...
    {{/if}}
  </div>

</template>

<template name="dashboardBundleSettings">
  {{!-- navbar --}}
  <div class='container'>
    <h1>{{this}}</h1>
    <form id="updateBundle" class="form-inline">
      <div class="form-group">
        <label for="jacket" class="sr-only">Jacket</label>
        <select class="form-control jacket updateBundleProduct" name="jacket" id="jacket">
          <option id="jacket-unselected" name="jacket-unselected" class="form-control" value="">Choose Jacket</option>
          {{#each jackets}}
            {{> bundleProductOption}}
          {{/each}}
        </select>
        {{#if productSelected 'jacket'}}
          {{> bundleProductColorSelect product='Jacket' color=this}}
        {{/if}}
      </div>
      <br />
      <div class="form-group">
        <label for="pants" class="sr-only">Pants</label>
        <select class="form-control pants updateBundleProduct" name="pants" id="pants">
          <option id="pants-unselected" name="pants-unselected" class="form-control" value="">Choose Pants</option>
          {{#each pants}}
            {{> bundleProductOption}}
          {{/each}}
        </select>
        {{#if productSelected 'pants'}}
          {{> bundleProductColorSelect product='Pants' color=this}}
        {{/if}}
      </div>
      <br />
      <div class="form-group">
        <label for="gloves" class="sr-only">Gloves</label>
        <select class="form-control gloves updateBundleProduct" name="gloves" id="gloves">
          <option id="gloves-unselected" name="gloves-unselected" class="form-control" value="">Choose Gloves</option>
          {{#each gloves}}
            {{> bundleProductOption}}
          {{/each}}
        </select>
        {{#if productSelected 'gloves'}}
          {{> bundleProductColorSelect product='Gloves' color=this}}
        {{/if}}
      </div>
      <br />
      <div class="form-group">
        <label for="goggles" class="sr-only">Goggles</label>
        <select class="form-control goggles updateBundleProduct" name="goggles" id="goggles">
          <option id="goggles-unselected" name="goggles-unselected" class="form-control" value="">Choose Goggles</option>
          {{#each goggles}}
            {{> bundleProductOption}}
          {{/each}}
        </select>
        {{#if productSelected 'goggles'}}
          {{> bundleProductColorSelect product='Goggles' color=this}}
        {{/if}}
      </div>
    </form>
  </div>
</template>

<template name='bundleProductOption'>
  <option id="{{productType}}-{{_id}}" name="{{productType}}-{{_id}}" class="form-control" value="{{_id}}" {{isSelectedProduct productType _id}}>{{gender}} {{vendor}} {{title}}</option>
</template>

<template name='bundleProductColorSelect'>
  <select class="form-control {{productType}} updateBundleColor" name="{{productType}}" id="{{productType}}">
    <option id="{{product}}-color-unselected" name="{{product}}-color-unselected" class="form-control" value="">Choose {{product}} Color</option>
    {{#if Template.subscriptionsReady}}
      {{#each colors}}
        {{> bundleProductColorOption}}
      {{/each}}
    {{/if}}
  </select>
</template>

<template name='bundleProductColorOption'>
  <option name="{{../productId}}-{{this}}" class="form-control" value="{{this}}" {{isSelectedColor ../productType this}}>{{this}}</option>
</template>
